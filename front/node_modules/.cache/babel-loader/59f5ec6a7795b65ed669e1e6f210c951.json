{"ast":null,"code":"import axios from 'axios';\nimport Student from './components/Student.vue';\nexport default {\n  name: 'App',\n  components: {\n    Student\n  },\n\n  data() {\n    return {\n      user_for_login: {\n        username: \"\",\n        password: \"\"\n      },\n      user_for_register: {\n        username: \"\",\n        password: \"\",\n        confirmPassword: \"\"\n      },\n      page: 1,\n      dialogVisible: false,\n      dialogVisiblelogin: false,\n      dialogVisibleregister: false,\n      students: [],\n      newStudent: {\n        number: \"\",\n        name: \"\",\n        age: \"\",\n        chi: \"\",\n        math: \"\",\n        eng: \"\"\n      }\n    };\n  },\n\n  methods: {\n    getStudent() {\n      if (sessionStorage.getItem(\"islogined\") == \"true\") {\n        axios({\n          url: \"http://localhost:8080/students\",\n          method: 'GET'\n        }).then(res => {\n          console.log(res.data);\n          this.students = res.data;\n        });\n      } else {\n        this.$alert(\"请先登录\");\n      }\n    },\n\n    // 对话框\n    handleClose(done) {\n      this.$confirm('确认关闭？').then(_ => {\n        done();\n      }).catch(_ => {});\n    },\n\n    addStudent() {\n      axios({\n        url: \"http://localhost:8080/add\",\n        method: 'POST',\n        data: this.newStudent\n      });\n      this.dialogVisible = false;\n    },\n\n    next_page() {\n      this.page += 1;\n    },\n\n    last_page() {\n      this.page -= 1;\n    },\n\n    login() {\n      axios({\n        url: \"http://localhost:8080/login\",\n        method: 'POST',\n        data: this.user_for_login\n      }).then(res => {\n        console.log(res.data);\n\n        if (res.data == \"1\") {\n          sessionStorage.setItem(\"islogined\", \"true\"); //sessionStorage.clear()清除\n          //sessionStorage.getItem(\"\")//拿取数据\n          //存的key value\n        } else {\n          alert(\"用户名或密码错误\");\n        } // localStorage.setItem(\"login\",res.data)\n\n      });\n      this.dialogVisiblelogin = false; //登录状态的保持才是重点\n    },\n\n    register() {\n      // 注册按钮绑定事件\n      axios({\n        url: \"http://localhost:8080/register\",\n        method: \"POST\",\n        data: this.user_for_register\n      });\n    }\n\n  },\n  computed: {\n    students_for_page() {\n      return this.students.slice(this.page * 5 - 5, this.page * 5); //数组切片\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA2FA;AACA;AACA;EACAA,WADA;EAEAC;IACAC;EADA,CAFA;;EAKAC;IACA;MACAC;QACAC,YADA;QAEAC;MAFA,CADA;MAKAC;QACAF,YADA;QAEAC,YAFA;QAGAE;MAHA,CALA;MAUAC,OAVA;MAWAC,oBAXA;MAYAC,yBAZA;MAaAC,4BAbA;MAcAC,YAdA;MAeAC;QACAC,UADA;QAEAf,QAFA;QAGAgB,OAHA;QAIAC,OAJA;QAKAC,QALA;QAMAC;MANA;IAfA;EAwBA,CA9BA;;EA+BAC;IACAC;MACA;QACAC;UACAC,qCADA;UAEAC;QAFA,GAGAC,IAHA,CAGAC;UACAC;UACA;QACA,CANA;MAOA,CARA,MAQA;QACA;MACA;IAEA,CAdA;;IAeA;IACAC;MACA,uBACAH,IADA,CACAI;QACAC;MACA,CAHA,EAIAC,KAJA,CAIAF,OAJA;IAKA,CAtBA;;IAuBAG;MACAV;QACAC,gCADA;QAEAC,cAFA;QAGArB;MAHA;MAKA;IACA,CA9BA;;IA+BA8B;MACA;IACA,CAjCA;;IAkCAC;MACA;IACA,CApCA;;IAqCAC;MACAb;QACAC,kCADA;QAEAC,cAFA;QAGArB;MAHA,GAIAsB,IAJA,CAIAC;QACAC;;QACA;UACAS,4CADA,CAEA;UACA;UACA;QACA,CALA,MAKA;UACAC;QACA,CATA,CAUA;;MACA,CAfA;MAgBA,gCAjBA,CAkBA;IACA,CAxDA;;IAyDAC;MACA;MACAhB;QACAC,qCADA;QAEAC,cAFA;QAGArB;MAHA;IAKA;;EAhEA,CA/BA;EAiGAoC;IACAC;MACA,6DADA,CAEA;IACA;;EAJA;AAjGA","names":["name","components","Student","data","user_for_login","username","password","user_for_register","confirmPassword","page","dialogVisible","dialogVisiblelogin","dialogVisibleregister","students","newStudent","number","age","chi","math","eng","methods","getStudent","axios","url","method","then","res","console","handleClose","_","done","catch","addStudent","next_page","last_page","login","sessionStorage","alert","register","computed","students_for_page"],"sourceRoot":"src","sources":["App.vue"],"sourcesContent":["<template>\n  <div id=\"app\">\n    <div class = \"col-8 offset-2\">\n      <table class=\"table caption-top table-hover\">\n  <caption class=\"text-center\">\n    <h1>\n      学生管理系统\n    </h1>\n    <el-button type=\"primary\" @click = \"getStudent\">获取学生信息</el-button>\n    <el-button type=\"warning\" @click=\"dialogVisible = true\">添加学生</el-button>\n\n<el-dialog\n  title=\"提示\"\n  :visible.sync=\"dialogVisible\"\n  width=\"30%\"\n  :before-close=\"handleClose\">\n  <div>添加学生信息</div>\n  <span slot=\"footer\" class=\"dialog-footer\">\n    <el-button @click=\"dialogVisible = false\">取 消</el-button>\n    <el-button type=\"primary\" @click=\"addStudent\">添加</el-button>\n  </span>\n  <!-- 与newstudent绑定 -->\n  <div><span>学号</span><input v-model=\"newStudent.number\"/></div>\n  <div><span>姓名</span><input v-model=\"newStudent.name\"/></div>\n  <div><span>年龄</span><input v-model.number=\"newStudent.age\"/></div>\n  <div><span>语文</span><input v-model.number=\"newStudent.chi\"/></div>\n  <div><span>数学</span><input v-model.number=\"newStudent.math\"/></div>\n  <div><span>英语</span><input v-model.number=\"newStudent.eng\"/></div>\n</el-dialog>\n<el-button type=\"info\" @click=\"dialogVisiblelogin = true\">login</el-button>\n\n<el-dialog\n  title=\"登录\"\n  :visible.sync=\"dialogVisiblelogin\"\n  width=\"30%\"\n  :before-close=\"handleClose\">\n  <span>用户名</span><input type=\"text\" v-model=\"user_for_login.username\">\n  <!-- v-model绑定 -->\n  <br>\n  <span>密码</span><input type=\"password\" v-model=\"user_for_login.password\">\n  <span slot=\"footer\" class=\"dialog-footer\">\n    <el-button @click=\"dialogVisiblelogin = false\">取 消</el-button>\n    <el-button type=\"primary\" @click=\"login\">登录</el-button>\n  </span>\n</el-dialog>\n<el-button type=\"info\" @click=\"dialogVisibleregister = true\">register</el-button>\n<!-- type颜色 -->\n<el-dialog\n  title=\"注册\"\n  :visible.sync=\"dialogVisibleregister\"\n  width=\"30%\"\n  :before-close=\"handleClose\">\n  <span>用户名</span><input type=\"text\" v-model=\"user_for_register.username\">\n  <!-- v-model绑定 -->\n  <br>\n  <span>密码</span><input type=\"password\" v-model=\"user_for_register.password\">\n  <br>\n   <span>确认密码</span><input type=\"password\" v-model=\"user_for_register.confirmPassword\">\n  <span slot=\"footer\" class=\"dialog-footer\">\n    <el-button @click=\"dialogVisibleregister = false\">取 消</el-button>\n    <el-button type=\"primary\" @click=\"register\">注册</el-button>\n  </span>\n</el-dialog>\n  </caption>\n  <thead>\n    <tr>\n      <th scope=\"col\">学号</th>\n      <th scope=\"col\">姓名</th>\n      <th scope=\"col\">年龄</th>\n      <th scope=\"col\">语文</th>\n      <th scope=\"col\">数学</th>\n      <th scope=\"col\">英语</th>\n      <th scope=\"col\">操作</th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <Student v-for=\"stu in students_for_page\" :key=\"stu.id\" :student=\"stu\"></Student>\n  </tbody>\n</table>\n<div class = \"text-center\">\n  <el-button-group>\n  <el-button type=\"primary\" icon=\"el-icon-arrow-left\" @click=\"last_page\">上一页</el-button>\n  <el-button type=\"primary\" @click=\"next_page\">下一页<i class=\"el-icon-arrow-right el-icon--right\"></i></el-button>\n  </el-button-group>\n</div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport Student from './components/Student.vue'\nexport default {\n  name: 'App',\n  components: {\n    Student\n  },\n  data() {\n    return{\n      user_for_login:{\n        username:\"\",\n        password:\"\"\n      },\n      user_for_register:{\n        username:\"\",\n        password:\"\",\n        confirmPassword:\"\"\n      },\n      page :1,\n      dialogVisible: false,\n      dialogVisiblelogin: false,\n      dialogVisibleregister: false,\n      students:[],\n      newStudent:{\n        number:\"\",\n        name:\"\",\n        age:\"\",\n        chi:\"\",\n        math:\"\",\n        eng:\"\"\n      }\n    }\n  },\n  methods:{\n    getStudent(){\n      if(sessionStorage.getItem(\"islogined\")==\"true\"){\n        axios({\n        url:\"http://localhost:8080/students\",\n        method:'GET',\n        }).then(res=>{\n          console.log(res.data);\n          this.students = res.data;\n        })\n      }else{\n        this.$alert(\"请先登录\")\n      }\n      \n    },\n    // 对话框\n    handleClose(done) {\n        this.$confirm('确认关闭？')\n          .then(_ => {\n            done();\n          })\n          .catch(_ => {});\n      },\n    addStudent(){\n      axios({\n        url:\"http://localhost:8080/add\",\n        method:'POST',\n        data:this.newStudent\n      })\n      this.dialogVisible = false\n    },\n    next_page(){\n      this.page+=1;\n    },\n    last_page(){\n      this.page-=1;\n    },\n    login(){\n      axios({\n        url:\"http://localhost:8080/login\",\n        method:'POST',\n        data:this.user_for_login\n      }).then(res=>{\n        console.log(res.data)\n        if(res.data == \"1\"){\n          sessionStorage.setItem(\"islogined\",\"true\");\n          //sessionStorage.clear()清除\n          //sessionStorage.getItem(\"\")//拿取数据\n          //存的key value\n        }else{\n          alert(\"用户名或密码错误\")\n        }\n        // localStorage.setItem(\"login\",res.data)\n      })\n      this.dialogVisiblelogin = false\n      //登录状态的保持才是重点\n    },\n    register(){\n      // 注册按钮绑定事件\n      axios({\n        url:\"http://localhost:8080/register\",\n        method:\"POST\",\n        data:this.user_for_register\n      })\n    }\n  },\n  computed:{\n    students_for_page(){\n      return this.students.slice(this.page*5-5,this.page*5)\n      //数组切片\n    }\n  }\n}\n</script>\n\n<style>\n\n</style>\n"]},"metadata":{},"sourceType":"module"}